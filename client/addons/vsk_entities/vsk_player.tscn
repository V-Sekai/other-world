[gd_scene load_steps=9 format=3 uid="uid://dh1f2a20fn4dq"]

[ext_resource type="Script" path="res://addons/vsk_entities/vsk_player.gd" id="1_ily3q"]
[ext_resource type="Script" path="res://addons/vsk_entities/extensions/interpolate_origin_to_zero_node_3d.gd" id="2_jhmsa"]
[ext_resource type="Script" path="res://addons/vsk_entities/extensions/interpolate_angle_to_zero_anchored_node_3d.gd" id="3_km368"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ks12f"]
radius = 0.1
height = 1.5

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_klfjt"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 0

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_ga4ik"]
properties/0/path = NodePath(".:position")
properties/0/spawn = false
properties/0/replication_mode = 1

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_13hgm"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="SphereMesh" id="SphereMesh_5qth3"]

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("player_movement_controller", "collision_shape", "camera", "spawn_sync_node", "update_sync_node")]
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
script = ExtResource("1_ily3q")
player_movement_controller = NodePath("PlayerMovementController")
collision_shape = NodePath("CollisionShape3D")
camera = NodePath("PositionInterpolation/RotationInterpolation/XROrigin3D/XRCamera3D")
spawn_sync_node = NodePath("MultiplayerSynchronizerSpawn")
update_sync_node = NodePath("MultiplayerSynchronizerUpdate")

[node name="PlayerMovementController" parent="." node_paths=PackedStringArray("character_body", "xr_origin", "xr_camera", "position_interpolation", "rotation_interpolation") instance_placeholder="res://addons/vsk_entities/extensions/player_movement_controller.tscn"]
character_body = NodePath("..")
xr_origin = NodePath("../PositionInterpolation/RotationInterpolation/XROrigin3D")
xr_camera = NodePath("../PositionInterpolation/RotationInterpolation/XROrigin3D/XRCamera3D")
position_interpolation = NodePath("../PositionInterpolation")
rotation_interpolation = NodePath("../PositionInterpolation/RotationInterpolation")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.75, 0)
shape = SubResource("CapsuleShape3D_ks12f")
disabled = true

[node name="PositionInterpolation" type="Node3D" parent="."]
script = ExtResource("2_jhmsa")

[node name="RotationInterpolation" type="Node3D" parent="PositionInterpolation" node_paths=PackedStringArray("anchor_node")]
script = ExtResource("3_km368")
anchor_node = NodePath("XROrigin3D/XRCamera3D")

[node name="XROrigin3D" type="XROrigin3D" parent="PositionInterpolation/RotationInterpolation"]

[node name="XRCamera3D" type="XRCamera3D" parent="PositionInterpolation/RotationInterpolation/XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)

[node name="MultiplayerSynchronizerSpawn" type="MultiplayerSynchronizer" parent="."]
unique_name_in_owner = true
editor_description = "This node is always set up to have its authority owned by the server host, but is only used for the initial spawn state."
replication_config = SubResource("SceneReplicationConfig_klfjt")

[node name="MultiplayerSynchronizerUpdate" type="MultiplayerSynchronizer" parent="."]
unique_name_in_owner = true
replication_config = SubResource("SceneReplicationConfig_ga4ik")

[node name="DebugMesh" type="MeshInstance3D" parent="."]
material_override = SubResource("StandardMaterial3D_13hgm")
mesh = SubResource("SphereMesh_5qth3")
